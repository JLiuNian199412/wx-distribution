<!DOCTYPE html>
<html lang="en">
<head>
    <title>Title</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <link rel="stylesheet" type="text/css" href="/stylesheet/lib/aui.css" />
    <script type="text/javascript" src="/javascript/lib/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="/javascript/lib/handlebars-v4.0.2.js"></script>
    {{#each cssList}}
    <link rel='stylesheet' type="text/css" class="cssList" href='/stylesheet/{{this}}' />
    {{/each}}
    {{#each jsList}}
    <script type="text/javascript" src='/javascript/{{this}}' class="jsList"></script>
    {{/each}}
</head>
<body>
<header class="aui-bar aui-bar-nav aui-bar-light">
    <a class="aui-pull-left aui-btn">
        <span class="aui-iconfont aui-icon-menu"></span>
    </a>
    <div class="aui-title">
        <div class="aui-searchbar" id="search">
            <div class="aui-searchbar-input aui-border-radius" tapmode>
                <i class="aui-iconfont aui-icon-search"></i>
                <form action="javascript:search();">
                    <input type="search" placeholder="请输入搜索内容" id="search-input">
                </form>
            </div>
        </div>
    </div>
    <a class="aui-pull-right aui-btn ">
        <span class="aui-iconfont aui-icon-comment"></span>
    </a>
</header>
<div id="content">
    {{#each val}}
        {{id}}
        {{name}}
    {{/each}}
</div>
<footer class="aui-bar aui-bar-tab" id="footer">
    <div class="aui-bar-tab-item aui-active" tapmode>
        <i class="aui-iconfont aui-icon-home"></i>
        <div class="aui-bar-tab-label">首页</div>
    </div>
    <div class="aui-bar-tab-item" tapmode>
        <i class="aui-iconfont aui-icon-search"></i>
        <div class="aui-bar-tab-label">分类</div>
    </div>
    <div class="aui-bar-tab-item" tapmode>
        <i class="aui-iconfont aui-icon-star"></i>
        <div class="aui-bar-tab-label">店铺</div>
    </div>
    <div class="aui-bar-tab-item" tapmode >
        <div class="aui-badge">99</div>
        <i class="aui-iconfont aui-icon-cart"></i>
        <div class="aui-bar-tab-label">购物车</div>
    </div>
    <div class="aui-bar-tab-item" tapmode>
        <div class="aui-dot"></div>
        <i class="aui-iconfont aui-icon-my"></i>
        <div class="aui-bar-tab-label">我的</div>
    </div>
</footer>
<!--<script type="text/javascript" src="javascript/lib/api.js" ></script>-->
<script type="text/javascript" src="/javascript/lib/aui-tab.js" ></script>
<script type="text/javascript">
    apiready = function(){
        api.parseTapmode();
    };
    var tab = new auiTab({
        index: 1, //默认选中
        element:document.getElementById("footer"),
        repeatClick: false //是否允许重复点击
    },function(ret){
        if(ret){
            var str='';
            function tapSwitch(url){
                $.get(url,function(result){
                    $.each(result.cssList,function(_,v){
                        str+="<link rel='stylesheet' type='text/css' href='/stylesheet/"+v+"' class='cssList'/>"
                    });
                    $.each(result.jsList,function(_,v){
                        str+="<script type='text/javascript' src='/javascript/"+v+"' class='jsList'><\/script>"
                    });
                    $('head').append(str);
                    $('.aui-title').html(result.title);
                });
            }
            $('.cssList').remove();
            $('.jsList').remove();
            $('.templateList').remove();
            switch (ret.index){
                case 1:
                    tapSwitch('/home');
                    break;
                case 2:
                    tapSwitch('/shop');
                    break;
                case 3:
                    tapSwitch('/store');
                    break;
                case 4:
                    tapSwitch('/shop-cart');
                    break;
                case 5:
                    tapSwitch('/mine');
                    break;

            }
        }
    });
</script>
</body>
</html>